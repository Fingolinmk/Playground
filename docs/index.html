<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial scale=1.0">
    <title>ESP32 Playground</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="vendor/prism.css" />
</head>

<body>
    <div class="sidenav">
        <a href="#Introduction" id="Introduction_ref">Introduction</a>
        <a href="#Hardware" id="Hardware_ref">Hardware</a>
        <a href="#Firmware" id="Firmware_ref">Firmware</a>
        <a href="#Software" id="Software_ref">Software</a>
    </div>
    <div class="main">
        <h1 class="header"> Light</h1>
        <h2 id="Introduction" class="header"> Introduction</h2>
        <p>
            This project is a demo to play with various technologie, such as ÂµC Programming, MQTT, Node-Red.
            Therefore I created a light that is based on an ESP32, programmed with Arduino/PlatformIO.
            This lamp has three "panels" with 24 LED's, totaling 72 LEDs. All LED's are WS2812 and are therefore
            individually adressable.
            It keeps track of the time, using
            <a href="https://en.wikipedia.org/wiki/Network_Time_Protocol">NTP</a>.

            The device can be controlled via custom <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a> commands.
            These command can be triggered using for example a simple Node-Red Dashboard, which can be accessed with
            any
            browser.
        </p>
        <div class="slideshow-container">
            <div class="polaroid">
                <img src="img/IMG_20220131_184430_Bokeh.jpg" alt="The Light" style="width:100%">
                <div class="container">
                    <p>The Light</p>
                </div>
            </div>
        </div>

        <p>

        <h2 id="Hardware" class="header"> Hardware</h2>
        <p>The PCB has been manufactured by <a href="https://jlcpcb.com/ ">jlcpcb</a> and was designed in <a
                href="https://easyeda.com/">EasyEDA</a>.
            I am planning to move the schematics and the layout to KiCad in the future.
        </p>


        <div class="slideshow-container">

            <div class="mySlides fade">
                <div class="polaroid">
                    <div class="numbertext">1 / 4</div>
                    <img src="img/circuit.png" alt="Circuit" style="width:100%">
                    <div class="container">
                        <p>The Circuit</p>
                    </div>
                </div>
            </div>
            <div class="mySlides fade">
                <div class="polaroid">
                    <div class="numbertext">2 / 4</div>
                    <img src="img/Layout.png" alt="Circuit" style="width:100%">
                    <div class="container">
                        <p>The Layout</p>
                    </div>
                </div>
            </div>

            <div class="mySlides fade">
                <div class="polaroid">
                    <div class="numbertext">3 / 4</div>
                    <img src="img/pcb.jpg" alt="The PCB" style="width:100%">
                    <div class="container">
                        <p>The PCB</p>
                    </div>
                </div>
            </div>

            <div class="mySlides fade">
                <div class="polaroid">
                    <div class="numbertext">4 / 4</div>
                    <img src="img/PCB's.jpg" alt="Manufactured PCB's" style="width:100%">
                    <div class="container">
                        <p>Manufactured PCB's</p>
                    </div>
                </div>
            </div>

            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
            <div style="text-align:center">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
                <span class="dot" onclick="currentSlide(3)"></span>
                <span class="dot" onclick="currentSlide(4)"></span>
            </div>
        </div>


        <h2 id="Firmware" class="header">Firmware</h2>
        <p>Programming the device requires an FT232, since I saved the space on the pcb for it.
            The device must be put into programming mode, therefore GPIO0 has to be LOW, see <a
                href="https://docs.espressif.com/projects/esptool/en/latest/esp32/advanced-topics/boot-mode-selection.html">docs.espressif.com/</a>
        </p>
        <h3>RGB Control</h3>
        <h3>Sleep Timer</h3>
        <h3>Alert</h3>
        <h3>Flicker</h3>

        <h2 id="Software" class="header">Software</h2>

        <div class="tab">
            <button class="tablinks" onclick="insertCode('https:\/\/raw.githubusercontent.com/Fingolinmk/Playground/main/Code/Light/src/main.cpp'
                , 'includeContent' )">main.cpp
            </button>
            <button class="tablinks" onclick="insertCode('https:\/\/raw.githubusercontent.com/Fingolinmk/Playground/main/Code/Light/src/main.cpp'
                , 'includeContent' )">main.cpp
            </button>
            <button class="tablinks" onclick="insertCode('https:\/\/raw.githubusercontent.com/Fingolinmk/Playground/main/Code/Light/src/main.cpp'
                , 'includeContent' )">main.cpp
            </button>
        </div>
        <div id="London" class="tabcontent">
            <pre><code id="includeContent" class="language-clike"></code></pre>
        </div>
        <button type="button" class="collapsible">MQTT Commands</button>
        <div class="content">
            <p>The pattern for the MQTT Commands are:</p>
            <p><code>topic</code>: <code>command</code>, then an example plus description</p>
            <p><code>light</code> : <code>rgb(R:INT, G:INT, B:INT)</code>,
                Example:<code>light - "rgb(255,0,0)"</code>
                sets the lamp to red. The colors are R(ed),G(reen), and B(lue). The colors can be 0-255</p>
            <p><code>light</code> : <code>random</code>, Example:<code>light - "random"</code> sets a random color
                pattern for the lamp</p>
            <p><code>light</code> : <code>Sparkel</code>, Example:<code>light - "Sparkel"</code>. Lets the lamp
                sparkel
                in a random pattern for the time
                provided by the timer
            </p>
            <p><code>light/timer</code> : <code>"time_in_mins"</code> : <code>light/timer - "10"</code>. Sets the
                timer
                for fadeout and for sparkel to 10 minutes</p>
            <p><code>light/Alert/Status</code> : "true/false" : enables the alert, that has been specified by </p>
            <p><code>light/Alert/Time</code> "light/Alert/Time : "{"hour":2,"minute":3}" : Sets the time of the
                alert
            </p>
        </div>
        <p>
            To control the lamp I use a Node Red Dashboard, see <a
                href="https://flows.nodered.org/node/node-red-dashboard">node-red-dashboard</a>.
            For the future I plan to build a simple Flutter App that can do the same.
        <p>

        <div class="polaroid" style="width:20%">
            <img src="img/Node-Red-FE.png" alt="The Light" style="width:100%">
            <div class="container">
                <p>Node Red Dashboard</p>
            </div>
        </div>

    </div>
    <script src="vendor/jquery.min.js"></script>
    <script src="vendor/prism.js"></script>
    <script src="app.js"></script>
</body>

</html>